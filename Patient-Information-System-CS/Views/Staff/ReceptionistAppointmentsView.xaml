<UserControl x:Class="Patient_Information_System_CS.Views.Staff.ReceptionistAppointmentsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1200"
             Background="White">
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2.2*"/>
            <ColumnDefinition Width="24"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0"
                BorderBrush="#DEE2E6"
                BorderThickness="1"
                CornerRadius="6"
                Padding="18">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Text="Book New Appointment"
                               FontSize="24"
                               FontWeight="Bold"
                               Foreground="#2C3E50"/>
                    <TextBlock Text="Capture walk-in requests and match them with an available doctor"
                               Margin="0,6,0,18"
                               Foreground="#607D8B"/>

                    <TextBlock Text="Patient"
                               FontWeight="SemiBold"/>
                    <ComboBox x:Name="PatientComboBox"
                              Height="35"
                              Padding="10"
                              Margin="0,0,0,16"
                              DisplayMemberPath="DisplayName"/>

                    <TextBlock Text="Doctor"
                               FontWeight="SemiBold"/>
                    <ComboBox x:Name="DoctorComboBox"
                              Height="35"
                              Padding="10"
                              Margin="0,0,0,16"
                              DisplayMemberPath="DisplayName"/>

                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="16"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel>
                            <TextBlock Text="Date"
                                       FontWeight="SemiBold"/>
                            <DatePicker x:Name="AppointmentDatePicker"
                                        Height="35"
                                        Padding="10"
                                        SelectedDate="{x:Static System:DateTime.Today}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Time"
                                       FontWeight="SemiBold"/>
                            <TextBox x:Name="AppointmentTimeTextBox"
                                     Height="35"
                                     Padding="10"
                                     Text="9:00 AM"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="Reason for visit"
                               FontWeight="SemiBold"/>
                    <TextBox x:Name="ReasonTextBox"
                             Height="80"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             Padding="10"
                             Margin="0,0,0,18"/>

                    <Button Content="Schedule Appointment"
                            x:Name="ScheduleButton"
                            Background="#28A745"
                            Foreground="White"
                            Padding="30,12"
                            FontSize="16"
                            FontWeight="SemiBold"
                            BorderThickness="0"
                            Click="ScheduleButton_Click"/>

                    <Border x:Name="FormFeedbackBorder"
                            Background="#E3F2FD"
                            BorderBrush="#90CAF9"
                            BorderThickness="1"
                            CornerRadius="6"
                            Padding="14"
                            Margin="0,18,0,0"
                            Visibility="Collapsed">
                        <TextBlock x:Name="FormFeedbackTextBlock"
                                   Foreground="#0D47A1"
                                   TextWrapping="Wrap"/>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <Border Grid.Column="2"
                BorderBrush="#DEE2E6"
                BorderThickness="1"
                CornerRadius="6"
                Padding="18">
            <TabControl x:Name="AppointmentsTabControl" FontSize="14">
                <TabItem Header="Pending Requests" Padding="16,10">
                    <StackPanel>
                        <Border Background="#FFF3CD"
                                BorderBrush="#FFC107"
                                BorderThickness="1"
                                CornerRadius="5"
                                Padding="12"
                                Margin="0,0,0,14">
                            <TextBlock x:Name="PendingBanner"
                                       Foreground="#856404"
                                       FontWeight="SemiBold"/>
                        </Border>
                        <DataGrid x:Name="PendingAppointmentsGrid"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  IsReadOnly="True"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="Horizontal"
                                  AlternatingRowBackground="#F8F9FA"
                                  RowHeight="42">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Date &amp; Time"
                                                    Width="*"
                                                    Binding="{Binding ScheduledFor, StringFormat={}{0:MMM dd, h:mm tt}}"/>
                                <DataGridTextColumn Header="Patient"
                                                    Width="*"
                                                    Binding="{Binding PatientName}"/>
                                <DataGridTextColumn Header="Doctor"
                                                    Width="*"
                                                    Binding="{Binding DoctorName}"/>
                                <DataGridTextColumn Header="Reason"
                                                    Width="2*"
                                                    Binding="{Binding Description}"/>
                                <DataGridTemplateColumn Header="Action" Width="Auto">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Button Content="Approve"
                                                        Background="#0D6EFD"
                                                        Foreground="White"
                                                        Padding="12,6"
                                                        BorderThickness="0"
                                                        Margin="0,0,8,0"
                                                        Click="ApproveAppointment_Click"/>
                                                <Button Content="Reject"
                                                        Background="#DC3545"
                                                        Foreground="White"
                                                        Padding="12,6"
                                                        BorderThickness="0"
                                                        Click="RejectAppointment_Click"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </TabItem>
                <TabItem Header="All Appointments" Padding="16,10">
                    <DataGrid x:Name="AllAppointmentsGrid"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="True"
                              HeadersVisibility="Column"
                              GridLinesVisibility="Horizontal"
                              AlternatingRowBackground="#F8F9FA"
                              RowHeight="42">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Date &amp; Time"
                                                Width="*"
                                                Binding="{Binding ScheduledFor, StringFormat={}{0:MMM dd, h:mm tt}}"/>
                            <DataGridTextColumn Header="Patient"
                                                Width="*"
                                                Binding="{Binding PatientName}"/>
                            <DataGridTextColumn Header="Doctor"
                                                Width="*"
                                                Binding="{Binding DoctorName}"/>
                            <DataGridTextColumn Header="Status"
                                                Width="*"
                                                Binding="{Binding StatusDisplay}"/>
                            <DataGridTextColumn Header="Notes"
                                                Width="2*"
                                                Binding="{Binding Description}"/>
                            <DataGridTemplateColumn Header="Action" Width="Auto">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Cancel"
                                                Background="#6C757D"
                                                Foreground="White"
                                                Padding="12,6"
                                                BorderThickness="0"
                                                Click="CancelAppointment_Click"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </TabItem>
            </TabControl>
        </Border>
    </Grid>
</UserControl>
